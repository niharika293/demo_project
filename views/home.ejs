<!-- <html>
    <head>
        <title><%=title%></title>
    </head>
    <body>  (commented for the functioning of layouts.)-->

<!-- <header>
            Page Header
        </header> -->
<!-- Using Partials -->
<!-- removed the commented "include header part" as it was making the header to be included twice -->
<div id="div_home_heading">
    <h1>Codeial Home</h1>
</div>
<hr>
<div id="home_container">
    <section id="feed-posts">
        <h4>Posts</h4>
        <!-- To restrict visibility of the form to create posts only when the user is signed in -->
        <%if(locals.user){%>
            <form action="/posts/create" method="post" id="new-post-form">
                <textarea name="content" cols="30" rows="3" placeholder="Type text here..." required></textarea>
                <input type="submit" value="Post">
            </form>
        <%}%>
    <div id="posts-list-container">
        <ul>
            <%for(post of posts){%>
                   <%-include('_post')-%>
            <%}%>
        </ul>
    </div>
    </section>
    <%if(locals.user){%>
    <section id="user-friends">
        <h4>Friends</h4>
            <%for( f of all_friends){%>
                <p>
                    <!-- <a href="/user/profile/<%=f.id%>"><%=f.from_user%></a> -->
                    <a href="/user/profile/<%=f.friend_id%>"><%=f.friend_name%></a>
                </p>
            <%}%>
        
        <section id="users-section">
            <h4>Users</h4>

            <%for( u of all_users){%>
                <p>
                    <a href="/user/profile/<%=u.id%>"><%=u.name%></a>
                </p>
            <%}%>
        
        </section> 
    </section>
    <%}%>
</div>
<script src="<%= assetPath('js/home_comments.js') %>"></script>
<script src="<%= assetPath('js/home_posts.js') %>"></script>
<script src="<%= assetPath('js/toggle_likes.js') %>"></script>
<!-- Import script for toggle likes & run it over for already present posts & comments on the page. -->
<script>
    // For each toggle like button on the page, it calls the ToggleLike Class.
    $('.toggle-like-button').each(function(){
        // alert(10);
        let self = this;
        let toggleLike = new ToggleLike(self);
    });
</script>

<!-- <%-include('_footer');%> -->
<!-- <footer>
            Page Footer
        </footer> -->
<!-- </body> -->
<!-- </html> -->